<ion-view view-title="活动场地预订" ng-controller="SpaceRoomBookController">
	<ion-header-bar align-title="center" class="bar-light">
		<button class="button button-icon icon color-black" ng-click="topBack()">
			<i class="ion-chevron-left color-blue"></i>
		</button>
		<h1 class="title color-black fontsize-16">活动场地<span ng-if="parent_type == 0">预订</span><span ng-if="parent_type == 1">延时</span></h1>
	</ion-header-bar>

	<ion-content class="has-header bg-white" style="bottom:50px;">
		<div>
			<a class="item" style="background: #f2f2f2">
				<!-- <img src="img/icon-business-01.png" style="border-radius:0"> -->
				<h2>{{item.store_name}}{{item.meeting_room_name}}</h2>
				<small class="fontsize-12">
					<i class="ion-ios-location"></i>
					&nbsp;
					<span>{{item.store_address}}</span>
				</small>
			</a>
		</div>
		<div class="list list-inset m-t-15">
			<label class="item item-input">
				<span class="input-label label-width-1">预定人数<i class="assertive dot">*</i></span>
				<input type="text" ng-model="spaceroom.people_number" placeholder="请输入您的人数" class="border-center" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')">
			</label>
			<label class="item item-input item-icon-right" ng-click="showDate()">
				<span class="input-label label-width-1">预定日期<i class="assertive dot">*</i></span>
				<span class="border-center">{{date}}</span>
				<i class="icon ion-android-calendar calm marks"></i>
			</label>
			<div class="dark m-b-10">
				<a class="item item-icon-right" on-tap="selectOrderType()">
					订单类型
					<span class="item-note">{{selectOrderTypeResult}}</span><i class="icon item-note ion-ios-arrow-right"></i>
				</a>
			</div>
			<label class="item padding-10">
				<div class="col col-33 pull-left text-center fontsize-14" ng-class="{'bg-dark' : time.disabled || time.timeOut,'bg-blue' : time.checked,'b-t-none' : $index > 2,'b-l-none' : $index%3 != 0}" style="border:1px solid #ddd" ng-repeat="time in times" ng-click="check(time,$index)">
				<span ng-class="{'gray' : time.timeOut && !time.disabled,'assertive' : time.disabled}">{{time.time}}</span>
				</div>
				<div class="assertive text-right fontsize-12" style="clear:both" ng-if="user.user_type <= '1'">
					<div>
						<span ng-if="parent_type == 0 && item.fourHoursAgoPrice != item.fourHoursAfterPrice">四小时以内{{item.fourHoursAgoPrice}}/小时,四小时以后{{item.fourHoursAfterPrice}}/小时</span>
					</div>
					<div>
						<span ng-if="parent_type == 1">延时订单{{item.fourHoursAfterPrice}}/小时</span>
					</div>
					<div>
						<span ng-if="userCheckTimes <= 4 && parent_type == 0">*预订不满四小时按四小时收费</span>
					</div>
				</div>
				<div class="assertive text-right fontsize-12" style="clear:both" ng-if="user.user_type > '1'">
					<div>
						<span ng-if="parent_type == 0 && item.fourHoursAgoPriceMember != item.fourHoursAfterPriceMember">四小时以内{{item.fourHoursAgoPriceMember}}/小时,四小时以后{{item.fourHoursAfterPriceMember}}/小时</span>
					</div>
					<div>
						<span ng-if="parent_type == 1">延时订单{{item.fourHoursAfterPriceMember}}/小时</span>
					</div>
					<div>
						<span ng-if="userCheckTimes <= 4 && parent_type == 0">*预订不满四小时按四小时收费</span>
					</div>
				</div>
			</label>
			<label class="item item-input m-t-10">
				备注
			</label>
			<label class="item item-input">
				<textarea rows="4" placeholder="请填写备注信息" ng-model="spaceroom.comments"></textarea>
			</label>
<!-- 			<label class="item item-input m-t-10">
				<span class="pull-left">优惠券</span>
				<span style="position:absolute;right:15px;">
					无可用
					<i class="icon ion-ios-arrow-right"></i>
				</span>
			</label> -->
			<a class="item" ng-if="user.user_type <= '1'">
				预订价格
				<span class="item-note assertive">
					<span ng-if="userCheckTimes <= 4 && !parent_type">￥{{item.fourHoursAgoPrice}}*4</span>
					<span ng-if="userCheckTimes > 4 && !parent_type">￥{{item.fourHoursAgoPrice}}*4+{{item.fourHoursAfterPrice}}*{{userCheckTimes-4}}</span>
					<span ng-if="parent_type == 1">￥{{item.fourHoursAfterPrice}}*{{userCheckTimes}}</span>
				</span>
			</a>
			<a class="item" ng-if="user.user_type > '1'">
				预订价格
				<span class="item-note assertive">
					<span ng-if="userCheckTimes <= 4 && !parent_type">￥{{item.fourHoursAgoPriceMember}}*4</span>
					<span ng-if="userCheckTimes > 4 && !parent_type">￥{{item.fourHoursAgoPriceMember}}*4+{{item.fourHoursAfterPriceMember}}*{{userCheckTimes-4}}</span>
					<span ng-if="parent_type == 1">￥{{item.fourHoursAfterPriceMember}}*{{userCheckTimes}}</span>
				</span>
			</a>

			<a class="item" ng-if="parent_type == 0">
					押金
					<span class="item-note assertive">
						￥300
					</span>
			</a>
		</div>


	</ion-content>
	<div class="tabs tabs-icon-top">
		<div class="business-product-footthree" style="width:60%">
			<h4 class="assertive">实付款：￥{{total}}</h4>
		</div>
		<div class="business-product-footfour button no-radius bg-red color-white" ng-disabled="isGuest" ng-click="create()">
			提交订单
		</div>
	</div>
</ion-view>
